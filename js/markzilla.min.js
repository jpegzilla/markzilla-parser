var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,c={next:function(){if(e<a.length){var g=e++;return{value:b(g,a[g]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(a,b,e,c){if(b){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var g=a[c];g in e||(e[g]={});e=e[g]}a=a[a.length-1];c=e[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3");
var jsonObject,inputFile,filePath="/../mkz/test.mkz",postObject={},elements=[],yyyymmdd=function(){var a=new Date,b=a.getFullYear().toString(),e=(a.getMonth()+1).toString(),a=a.getDate().toString();1==a.length&&(a="0"+a);1==e.length&&(e="0"+e);return{yyyymmdd:b+e+a,y:b,m:e,d:a}},parseDateString=function(a){if(!/^(\d){8}$/.test(a))return"invalid date";var b=a.substr(0,4),e=a.substr(4,2);a=a.substr(6,2);return{y:b,m:e,d:a}},markzilla=mkz={parse:function(a){if(a)return elements=[],$.get(a,function(b){inputFile=
b}).then(function(b){var a=b.split("\n"),c=[];for(b=0;b<a.length;b++)/^#/.test(a[b])?c.push(a[b]):/\n\r/.test(a[b])||/^\s/.test(a[b])||""==a[b]||/^\/\//.test(a[b])||(c[c.length-1]=c[c.length-1]+="<br>"+a[b]);for(b=0;b<c.length;b++)switch(lineText=c[b].split(/^#[a-z]*[0-9]*\s/)[1],lineType=c[b].split(/\s/)[0].split("#")[1],line=c[b],lineType){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":case "p":case "code":d="<"+lineType+">"+lineText+"</"+lineType+">";elements.push(d);break;case "img":x=
lineText.split(/(^.*\/\S*)/),imgPath=x[1],imgAlt=x[2].trim(),d="<"+lineType+' src="'+imgPath+'" alt="'+imgAlt+'" title="'+imgAlt+'">',elements.push(d)}var c=/(\[[^\\a].*?\])/gi,a=/(\[[a].*?\]\(.*?\))/gi,g=/(\[\\)/gi,k=/(\[[a].*?\])/,l=/(\(.*?\))/;for(b=0;b<elements.length;b++){var d=elements[b].match(c),f=elements[b].match(a);if(f&&d){var f=elements[b],h;el=elements[b].match(c);for(var d=0;d<el.length;d++)currentHL=el[d],elPosition=elements[b].indexOf(el[d]),elType=el[d].replace(/(\[|\])/gi,"").substr(0,
el[d].replace(/(\[|\])/gi,"").indexOf(" ")),elType=elType.split("").join(" "),elContent=el[d].replace(/(\[|\])/gi,"").substr(el[d].replace(/(\[|\])/gi,"").indexOf(" ")+1),f.substr(elPosition,currentHL.length),elToLast=currentHL.length+elPosition,lineLength=f.length,hLlength=currentHL.length,h=elements[b].substr(0,elPosition)+("<span class='"+elType+"'>"+elContent+"</span>")+elements[b].substr(elToLast,lineLength),elements[b]=h;el=elements[b].match(a);for(d=0;d<el.length;d++)f=elements[b],lineLength=
f.length,elPosition=elements[b].indexOf(el[d]),currentLink=el[d],linkText=currentLink.match(k)[0].replace(/(\[a\s|\])/gi,""),linkAdd=currentLink.match(l)[0].replace(/(\(|\))/gi,""),elToLast=currentLink.length+elPosition,h=elements[b].substr(0,elPosition)+('<a target="_blank" href="'+linkAdd+'">'+linkText+"</a>")+elements[b].substr(elToLast,lineLength),elements[b]=h}else if(d)for(f=elements[b],el=elements[b].match(c),d=0;d<el.length;d++)currentHL=el[d],elPosition=elements[b].indexOf(el[d]),elType=
el[d].replace(/(\[|\])/gi,"").substr(0,el[d].replace(/(\[|\])/gi,"").indexOf(" ")),elType=elType.split("").join(" "),elContent=el[d].replace(/(\[|\])/gi,"").substr(el[d].replace(/(\[|\])/gi,"").indexOf(" ")+1),f.substr(elPosition,currentHL.length),elToLast=currentHL.length+elPosition,lineLength=f.length,hLlength=currentHL.length,h=elements[b].substr(0,elPosition)+("<span class='"+elType+"'>"+elContent+"</span>")+elements[b].substr(elToLast,lineLength),elements[b]=h;else if(f)for(el=elements[b].match(a),
d=0;d<el.length;d++)line=elements[b],lineLength=line.length,elPosition=elements[b].indexOf(el[d]),currentLink=el[d],linkText=currentLink.match(k)[0].replace(/(\[a\s|\])/gi,""),linkAdd=currentLink.match(l)[0].replace(/(\(|\))/gi,""),console.log(linkText),elToLast=currentLink.length+elPosition,finalLine=elements[b].substr(0,elPosition)+('<a target="_blank" href="'+linkAdd+'">'+linkText+"</a>")+elements[b].substr(elToLast,lineLength),elements[b]=finalLine}for(b=0;b<elements.length;b++)elements[b]=elements[b].replace(g,
"[");for(b=0;b<elements.length;b++)element=elements[b],index=b,c={},elements[b]=(c[index]=element,c)}),elements;console.warn("no file path specified.");return!1},decon:function(a){console.log("converting from .html to .mkz")},insertPost:function(a){if(Object.keys(a)[0]){var b=window.performance.now(),e=Object.values(a)[0].title,c=Object.keys(a)[0];a=Object.values(a)[0].body;c=parseDateString(c);$(".mkzTitle").html(e);$(".mkzDate").text(c.y+" "+c.m+" "+c.d+" ");for(e=0;e<a.length;e++)a[e]&&$(".mkzBody").append(a[e]);
e=window.performance.now();return"completed task in "+.001*Math.floor(e-b)+" seconds."}console.warn("no postObject defined");return!1},saveToPost:function(a){if(0!==a.length){console.log("saving as json post.");articleDate=yyyymmdd().yyyymmdd;articleTitle=Object.values(a[0])[0];var b={};postObject=(b[articleDate]={title:articleTitle,body:[]},b);for(b=1;b<a.length;b++)postObject[articleDate].body[b]=Object.values(a[b])[0];return postObject}console.warn("no json to save.");return!1}};
