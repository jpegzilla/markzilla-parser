var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var e=a[Symbol.iterator];return e?e.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,e,d,b){if(e){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var h=a[b];h in d||(d[h]={});d=d[h]}a=a[a.length-1];b=d[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function e(){this.batch_=null}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;e.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};e.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(a){d(a,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};e.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var b=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(n){b.reject(n)}};b.prototype.createResolveAndReject_=function(){function a(a){return function(k){d||(d=!0,a.call(b,k))}}var b=this,d=
!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{var d;a:switch(typeof a){case "object":d=null!=a;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(n){this.reject_(n);return}"function"==
typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),
a[b]=null;this.onSettledCallbacks_=null}};var h=new e;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(f){d.reject(f)}};b.prototype.then=function(a,d){function e(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(q){h(q)}}:b}var f,h,k=new b(function(a,b){f=a;h=b});this.callWhenSettled_(e(a,f),
e(d,h));return k};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function d(){switch(e.state_){case 1:a(e.result_);break;case 2:b(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?h.asyncExecute(d):this.onSettledCallbacks_.push(function(){h.asyncExecute(d)})};b.resolve=function(a){return a instanceof b?a:new b(function(b,d){b(a)})};b.reject=function(a){return new b(function(b,d){d(a)})};
b.race=function(a){return new b(function(d,e){for(var h=$jscomp.makeIterator(a),k=h.next();!k.done;k=h.next())b.resolve(k.value).callWhenSettled_(d,e)})};b.all=function(a){var d=$jscomp.makeIterator(a),e=d.next();return e.done?b.resolve([]):new b(function(a,h){function f(b){return function(d){g[b]=d;k--;0==k&&a(g)}}var g=[],k=0;do g.push(void 0),k++,b.resolve(e.value).callWhenSettled_(f(g.length-1),h),e=d.next();while(!e.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(b.$jscomp$new$AsyncExecutor=function(){return new e});
return b},"es6-impl","es3");$jscomp.findInternal=function(a,e,d){a instanceof String&&(a=String(a));for(var b=a.length,h=0;h<b;h++){var k=a[h];if(e.call(d,k,h,a))return{i:h,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,b={next:function(){if(d<a.length){var h=d++;return{value:e(h,a[h]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es6","es3");
var filePath=mkzOptions.file,stylePath=mkzOptions.stylePath,styleName=mkzOptions.styleName,postObject={},elements=[],when=function(a,e,d){a()?e():setTimeout(function(){when(a,e,d)},d)},yyyymmdd=function(){var a=new Date,e=a.getFullYear().toString(),d=(a.getMonth()+1).toString(),a=a.getDate().toString();1==a.length&&(a="0"+a);1==d.length&&(d="0"+d);return{yyyymmdd:e+d+a,y:e,m:d,d:a}},parseDateString=function(a){if(!/^(\d){8}$/.test(a))return"invalid date";var e=a.substr(0,4),d=a.substr(4,2);a=a.substr(6,
2);return{y:e,m:d,d:a}},getFile=function(a){return new Promise(function(e,d){var b=new XMLHttpRequest;b.open("GET",a);b.onload=function(){200<=b.status&&300>b.status?e(b.response):d(b.statusText)};b.onerror=function(){return d(b.statusText)};b.send()})};getFile(stylePath).then(function(a){var e=document.createElement("style");stylesheet=JSON.parse(a).styles.find(function(a){return Object.keys(a)[0]==styleName});stylesheet=Object.values(stylesheet)[0];e.innerHTML=stylesheet;document.body.appendChild(e)});
var markzilla=mkz={parse:function(a){return new Promise(function(e,d){if(a)return elements=[],getFile(a).then(function(a){var b=a.split("\n");a=[];for(var d=0;d<b.length;d++)/^#/.test(b[d])?a.push(b[d]):/\n\r/.test(b[d])||/^\s/.test(b[d])||""==b[d]||/^\/\//.test(b[d])||(a[a.length-1]=a[a.length-1]+="<br>"+b[d]);for(b=0;b<a.length;b++)switch(lineText=a[b].split(/^#[a-z]*[0-9]*\s/)[1],lineType=a[b].split(/\s/)[0].split("#")[1],line=a[b],lineType){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":case "p":case "code":c=
"<"+lineType+">"+lineText+"</"+lineType+">";elements.push(c);break;case "img":x=lineText.split(/(^.*\/\S*)/),imgPath=x[1],imgAlt=x[2].trim(),c="<"+lineType+' src="'+imgPath+'" alt="'+imgAlt+'" title="'+imgAlt+'">',elements.push(c)}b=/(\[[^\\a].*?\])/gi;d=/(\[[a].*?\]\(.*?\))/gi;a=/(\[\\)/gi;for(var p=/(\[[a].*?\])/,n=/(\(.*?\))/,f=0;f<elements.length;f++){var l=elements[f].match(b),m=elements[f].match(d);if(m&&l){l=elements[f];el=elements[f].match(b);for(var g=0;g<el.length;g++)currentHL=el[g],elPosition=
elements[f].indexOf(el[g]),elType=el[g].replace(/(\[|\])/gi,"").substr(0,el[g].replace(/(\[|\])/gi,"").indexOf(" ")),elType=elType.split("").join(" "),elContent=el[g].replace(/(\[|\])/gi,"").substr(el[g].replace(/(\[|\])/gi,"").indexOf(" ")+1),elToLast=currentHL.length+elPosition,lineLength=l.length,hLlength=currentHL.length,m=elements[f].substr(0,elPosition)+("<span class='"+elType+"'>"+elContent+"</span>")+elements[f].substr(elToLast,lineLength),elements[f]=m;el=elements[f].match(d);for(g=0;g<el.length;g++)l=
elements[f],lineLength=l.length,elPosition=elements[f].indexOf(el[g]),currentLink=el[g],linkText=currentLink.match(p)[0].replace(/(\[a\s|\])/gi,""),linkAdd=currentLink.match(n)[0].replace(/(\(|\))/gi,""),elToLast=currentLink.length+elPosition,m=elements[f].substr(0,elPosition)+('<a target="_blank" href="'+linkAdd+'">'+linkText+"</a>")+elements[f].substr(elToLast,lineLength),elements[f]=m}else if(l)for(l=elements[f],el=elements[f].match(b),g=0;g<el.length;g++)currentHL=el[g],elPosition=elements[f].indexOf(el[g]),
elType=el[g].replace(/(\[|\])/gi,"").substr(0,el[g].replace(/(\[|\])/gi,"").indexOf(" ")),elType=elType.split("").join(" "),elContent=el[g].replace(/(\[|\])/gi,"").substr(el[g].replace(/(\[|\])/gi,"").indexOf(" ")+1),elToLast=currentHL.length+elPosition,lineLength=l.length,hLlength=currentHL.length,m=elements[f].substr(0,elPosition)+("<span class='"+elType+"'>"+elContent+"</span>")+elements[f].substr(elToLast,lineLength),elements[f]=m;else if(m)for(el=elements[f].match(d),l=0;l<el.length;l++)line=
elements[f],lineLength=line.length,elPosition=elements[f].indexOf(el[l]),currentLink=el[l],linkText=currentLink.match(p)[0].replace(/(\[a\s|\])/gi,""),linkAdd=currentLink.match(n)[0].replace(/(\(|\))/gi,""),elToLast=currentLink.length+elPosition,finalLine=elements[f].substr(0,elPosition)+('<a target="_blank" href="'+linkAdd+'">'+linkText+"</a>")+elements[f].substr(elToLast,lineLength),elements[f]=finalLine}for(b=0;b<elements.length;b++)elements[b]=elements[b].replace(a,"[");for(a=0;a<elements.length;a++)element=
elements[a],index=a,b={},elements[a]=(b[index]=element,b);e(elements)}),elements;console.warn("no file path specified.");d("no file path specified")})},decon:function(a){},insertPost:function(a){if(Object.keys(a)[0]){var e=window.performance.now(),d=Object.values(a)[0].title,b=Object.keys(a)[0];a=Object.values(a)[0].body;b=parseDateString(b);document.querySelector(".mkzTitle").innerHTML=d;document.querySelector(".mkzDate").textContent=b.y+" "+b.m+" "+b.d+" ";for(d=0;d<a.length;d++)a[d]&&(document.querySelector(".mkzBody").innerHTML=
document.querySelector(".mkzBody").innerHTML+a[d]);d=window.performance.now();return"completed task in "+.001*Math.floor(d-e)+" seconds."}console.warn("no postObject defined");return!1},saveToPost:function(a){return new Promise(function(e,d){if(0!==a.length){articleDate=yyyymmdd().yyyymmdd;articleTitle=Object.values(a[0])[0];var b={};postObject=(b[articleDate]={title:articleTitle,body:[]},b);for(b=1;b<a.length;b++)postObject[articleDate].body[b]=Object.values(a[b])[0];e(postObject)}else console.warn("no json to save."),
d("no json to save")})},createPost:function(a){return new Promise(function(e,d){a?markzilla.parse(a).then(function(a){markzilla.saveToPost(a).then(function(a){e(a)})}):d(Error("no filepath"))})}};mkz.createPost(filePath);
